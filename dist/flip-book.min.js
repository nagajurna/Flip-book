function Flip(a){function b(a){if(K(),x.drawImage(Q,s,t,j,k,0,0,v.width,v.height),M+=1,N+=1,O+=1,M==B)return clearInterval(a),R=null,u.dispatchEvent(F),document.dispatchEvent(F),void("first"===r?(s=f,t=e,P=0,Q=y[P],setTimeout(function(){x.drawImage(Q,s,t,j,k,0,0,v.width,v.height)},n)):"none"===r&&setTimeout(function(){u.style.visibility="hidden"},n));if(O%g==0){if(s=f,N==A)return t=e,O=0,N=0,P=0,void(Q=y[P]);if(O==z)return t=e,O=0,void(P<y.length-1&&(P+=1,Q=y[P]));t+=k+m}else s+=j+l}var c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=function(){u=document.getElementById(c);var a=u.children,b=!1;for(i=0;i<a.length;i++){"CANVAS"==a[i].tagName&&(v=a[i]),b=!0;break}b===!1&&(v=document.createElement("canvas"),u.appendChild(v)),v.style.width="100%",w=k/j,v.height=w*v.width,x=v.getContext("2d"),F.detail.container=c,G.detail.container=c,H.detail.container=c,I.detail.container=c,J.detail.container=c},D=function(){for(y=[],i=0;i<d.length;i++)Q=new Image,Q.src=d[i],y.push(Q);"first"===p?y[0].addEventListener("load",function(){x.drawImage(Q,s,t,j,k,0,0,v.width,v.height)},!1):"last"===p&&(s=f+(g-1)*(j+l),t=e+(h-1)*(k+m),P=y.length-1,y[P].addEventListener("load",function(){x.drawImage(Q,s,t,j,k,0,0,v.width,v.height)},!1))},E=function(){z=g*h,A=z*d.length,B=A*o},F=new CustomEvent("complete",{detail:{container:c,src:d}}),G=new CustomEvent("start",{detail:{container:c,src:d}}),H=new CustomEvent("pause",{detail:{container:c,src:d}}),I=new CustomEvent("resume",{detail:{container:c,src:d}}),J=new CustomEvent("stop",{detail:{container:c,src:d}}),K=function(){F.detail.src=d[P],G.detail.src=d[P],H.detail.src=d[P],I.detail.src=d[P],J.detail.src=d[P],F.detail.index=M+1,G.detail.index=M+1,H.detail.index=M+1,I.detail.index=M+2,J.detail.index=M+1};this.setContainer=function(a){if(void 0===a)throw new TypeError("Invalid flip() argument. Container must be defined");if("string"!=typeof a)throw new TypeError("Invalid flip() argument. Container must be string");if(""===a)throw new TypeError("Invalid flip() argument. Container must not be empty");c=a,C()},this.getContainer=function(){return c},this.setSrc=function(a){if(void 0===a)throw new TypeError("Invalid flip() argument. Src must be defined");if(a.constructor===Array){if(!(a.length>0))throw new TypeError("Invalid flip() argument. Src must not be empty");d=a,D(),E()}else{if("string"!=typeof a)throw new TypeError("Invalid flip() argument. Src must be string or array");if(""===a)throw new TypeError("Invalid flip() argument. Src must not be empty");d=[],d.push(a),D(),E()}},this.getSrc=function(){return d},this.setLeftMargin=function(a){f=void 0===a|"number"!=typeof a?0:a,s=f},this.getLeftMargin=function(){return f},this.setTopMargin=function(a){e=void 0===a|"number"!=typeof a?0:a,t=e},this.getTopMargin=function(){return e},this.setCols=function(a){if(void 0===a)throw new TypeError("Invalid flip() argument. Cols must be defined");if("number"!=typeof a)throw new TypeError("Invalid flip() argument. Cols must be a number");g=a,d&&E()},this.getCols=function(){return g},this.setRows=function(a){if(void 0===a)throw new TypeError("Invalid flip() argument. Rows must be defined");if("number"!=typeof a)throw new TypeError("Invalid flip() argument. Rows must be a number");h=a,d&&E()},this.getRows=function(){return h},this.setWidth=function(a){if(void 0===a)throw new TypeError("Invalid flip() argument. Width must be defined");if("number"!=typeof a)throw new TypeError("Invalid flip() argument. Width must be a number");j=a,u&&C()},this.getWidth=function(){return j},this.setHeight=function(a){if(!(void 0!==a|"number"==typeof a))throw new TypeError("Invalid flip() argument. Height must be defined");if("number"!=typeof a)throw new TypeError("Invalid flip() argument. Height must be a number");k=a,u&&C()},this.getHeight=function(){return k},this.setGutterX=function(a){l=void 0===a|"number"!=typeof a?0:a},this.getGutterX=function(){return l},this.setGutterY=function(a){m=void 0===a|"number"!=typeof a?0:a},this.getGutterY=function(){return m},this.setSpeed=function(a){n=void 0===a|"number"!=typeof a?100:a},this.getSpeed=function(){return n},this.setRepeat=function(a){o="infinite"===a?null:void 0===a|"number"!=typeof a?1:a,d&&E()},this.getRepeat=function(){return o},this.setStartPanel=function(a){p=void 0===a|"string"!=typeof a|""===a?"first":a},this.getStartPanel=function(){return p},this.setStopPanel=function(a){q=void 0===a|"string"!=typeof a|""===a?"last":a},this.getStopPanel=function(){return q},this.setCompletePanel=function(a){r=void 0===a|"string"!=typeof a|""===a?"last":a},this.getCompletePanel=function(){return r},this.setSrcOptions=function(a){this.setTopMargin(a.topMargin),this.setLeftMargin(a.leftMargin),this.setCols(a.cols),this.setRows(a.rows),this.setWidth(a.width),this.setHeight(a.height),this.setGutterX(a.gutterX),this.setGutterY(a.gutterY),this.setSrc(a.src)},this.setTopMargin(a.topMargin),this.setLeftMargin(a.leftMargin),this.setCols(a.cols),this.setRows(a.rows),this.setWidth(a.width),this.setHeight(a.height),this.setGutterX(a.gutterX),this.setGutterY(a.gutterY),this.setSpeed(a.speed),this.setRepeat(a.repeat),this.setStartPanel(a.startPanel),this.setStopPanel(a.stopPanel),this.setCompletePanel(a.completePanel),this.setSrc(a.src),this.setContainer(a.container);var L,M=0,N=0,O=0,P=0,Q=y[P];K();var R=null;this.start=function(){s=f,t=e,void 0!==L&&(clearInterval(L),M=0,N=0,O=0,P=0,Q=y[P],K()),L=setInterval(function(){b(L)},n),setTimeout(function(){u.style.visibility="visible"},n),R=!0,u.dispatchEvent(G),document.dispatchEvent(G)},this.pause=function(){1==R&&(clearInterval(L),R=!1,u.dispatchEvent(H),document.dispatchEvent(H))},this.resume=function(){null!=L&&R===!1&&(clearInterval(L),L=setInterval(function(){b(L)},n),R=!0,u.dispatchEvent(I),document.dispatchEvent(I))},this.stop=function(){null!=L&&null!=R&&(K(),clearInterval(L),R=null,u.dispatchEvent(J),document.dispatchEvent(J),"last"===q?(s=f+(g-1)*(j+l),t=e+(h-1)*(k+m),P=y.length-1,Q=y[P],x.drawImage(Q,s,t,j,k,0,0,v.width,v.height)):"first"===q?(s=f,t=e,P=0,Q=y[P],x.drawImage(Q,s,t,j,k,0,0,v.width,v.height)):"none"===q&&(u.style.visibility="hidden"))}}